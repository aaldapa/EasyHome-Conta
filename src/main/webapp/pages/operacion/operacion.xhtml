<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">  
    <ui:composition>  
    <h:body >	
    <!--  Capa emergente que NUEVA OPERACION -->
<div id="id_popup_form" class="modal" >
           <div class="modal-dialog">
             <div class="modal-content">
               <div class="modal-header">
                 <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="$('#id_popup_form').hide();"><span aria-hidden="true">Ã—</span></button>
                 <h4 class="modal-title"><h:outputLabel value="#{msg['operacion.form.subtitulo']}"/></h4>
               </div>
               <div class="modal-body">
		<div class="row">
       	<div class="col-md-12">
       		 <!-- Text inputs combos-->
       		 <div class="form-group">
	         	<h:outputLabel class="col-md-2 control-label" value="#{msg['operacion.form.productos']}"/>
        		<div class="col-md-4 form-group-inline">
            		<h:message for="id_producto_form" errorClass="has-error control-label" infoClass="has-info control-label" />
		            <div class="input-group input-append ">
		            	<h:selectOneMenu id="id_producto_form" value="#{operacionBean.operacionForm.idProducto}" styleClass="form-control" required="false" requiredMessage="#{msg['error.campo.obligatorio']}">
<!-- 								            		<f:selectItem itemValue="" itemLabel="#{msg['combo.selection.option']}" noSelectionOption="true"></f:selectItem> -->
		            		<f:selectItems value="#{operacionBean.lstProductos}" var="item" itemValue="#{item.value}" itemLabel="#{item.label}" ></f:selectItems>
		            	</h:selectOneMenu>
		            </div>
		        </div>
		        
		       <h:outputLabel class="col-md-2 control-label" value="#{msg['operacion.form.categorias']}"/>
		        <div class="col-md-4">
		            <div class="input-group input-append">
		            	<h:selectOneMenu id="id_categoria_form" value="#{operacionBean.operacionForm.idCategoria}" styleClass="form-control" >
		            		<f:selectItem itemValue="" itemLabel="#{msg['operaciones.listado.tabla.combo.seleccion']}" noSelectionOption="true"></f:selectItem>
		            		<f:selectItems value="#{operacionBean.lstCategorias}" var="item" itemValue="#{item.value}" itemLabel="#{item.label}" ></f:selectItems>
		            	</h:selectOneMenu>
		            </div>						            
		        </div>
	        </div>
	        
		    <!-- Text inputs fecha-->
			<div class="form-group">
		        <h:outputLabel styleClass="col-md-2 control-label" for="id_fecha" value="#{msg['operacion.form.fecha']}"/>
		        <div class="col-md-4 form-group-inline">
		        	<h:message for="id_fecha_form" errorClass="has-error control-label" infoClass="has-info control-label" />
		            <div class="input-group input-append">
		            	<h:inputText id="id_fecha_form" class="form-control date" value="#{operacionBean.operacionForm.fecha}" required="true" requiredMessage="#{msg['error.campo.obligatorio']}" autocomplete="off">
  	             							<f:convertDateTime pattern="#{msg['patron.fecha.corta']}" />
		          			</h:inputText>
		                <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
		            </div>
		        </div>	
		    </div>
		    
		     <!-- Text inputs concepto, importe-->
          	<div class="form-group">
	            <h:outputLabel styleClass="col-md-2 control-label" for="id_concepto_form" value="#{msg['operacion.form.concepto']}"/>
	            <div class="col-md-6">
	            	<h:inputText id="id_concepto_form" pt:placeholder="#{msg['operacion.form.concepto']}" class="form-control" label="#{msg['operacion.form.concepto']}" value="#{operacionBean.operacionForm.concepto}" maxlength="50"/>
	            </div>
	            
	            
	            <h:outputLabel styleClass="col-md-1 control-label" for="id_importe" value="#{msg['operacion.form.importe']}"/>
	            <div class="col-md-3 form-group-inline">
	            	<h:message for="id_importe_form" errorClass="has-error control-label" infoClass="has-info control-label" />
	            	<div class="input-group">
	            		<h:inputText id="id_importe_form" pt:placeholder="#{msg['operacion.form.importe']}" class="form-control" label="#{msg['operacion.form.importe']}" value="#{operacionBean.operacionForm.importe}" required="true" requiredMessage="#{msg['error.campo.obligatorio']}" autocomplete="off">
	            			<f:convertNumber  maxFractionDigits="2"  for="id_importe"/>
	            		</h:inputText>
	              		<span class="input-group-addon"><i class="fa fa-euro"></i></span>
	            	</div>
	            </div>
	        </div>
	        
	         <!-- Text inputs notas-->
	        <div class="form-group">
                <h:outputLabel styleClass="col-md-2 control-label" for="id_notas_form" value="#{msg['operacion.form.notas']}"/> 
	            <div class="col-md-10 ">
	              <h:inputTextarea id="id_notas_form" pt:placeholder="#{msg['operacion.form.notas']}" class="form-control" label="#{msg['producto.form.notas']}" value="#{operacionBean.operacionForm.notas}"/>
	            </div>
	        </div>
	        
       	</div>
       </div>

               </div>
               <div class="modal-footer">
		<div class="btn-toolbar">
			<h:commandButton type="button" onclick="$('#id_popup_form').hide();" styleClass="btn btn-default pull-right" value="#{msg['boton.cancelar']}" title="#{msg['boton.cancelar']}"/>
			<h:commandButton id="id_boton_guardar_form"  actionListener="#{operacionBean.doNewItem}" styleClass="btn btn-primary pull-right" value="#{msg['boton.guardar']}" title="#{msg['boton.guardar']}" onclick="$('#id_popup_form').hide();">
				<f:ajax listener="#{operacionBean.doNewItem}" event="click" 
					execute="id_producto_form id_categoria_form id_fecha_form id_concepto_form id_importe_form id_notas_form" 
					render="id_form:id_data_table id_form:id_nRegistros id_form:id_balance id_form:id_tIngresos id_form:id_tGastos"></f:ajax>
			</h:commandButton>
			<!-- Este script se ejecuta cuando hay un error de validacion cargado en la pagina -->
			<h:outputScript rendered="#{facesContext.validationFailed}">
				$('#id_popup_form').show();
			</h:outputScript> 
				 	</div>
               </div>
             </div><!-- /.modal-content -->
           </div><!-- /.modal-dialog -->
         </div><!-- /.modal -->
	</h:body>
	</ui:composition>
</html>        
